process Test = {
# output level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.FwkReport.reportEvery = 100

# input file(s)
  include "TopAnalysis/Configuration/data/SourceInput.cff"
  untracked PSet maxEvents = {untracked int32 input = 100}

# apply final event selection
  include "TopAnalysis/TopFilter/data/filterSequences/semiLepMuonSelection_cutflow.cff"
  sequence makeAllCuts = {makeSemiReference, makeSemiMuonSelection, makeSemiJetsSelection}

# TQAF Layer 2 for the ttbar semi-leptonic final state
  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtProducer.cff"

  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiLeptonicFilter.cfi"
  replace ttSemiLeptonicFilter.channel_1 = {0,1,0}
  include "TopQuarkAnalysis/TopTools/data/TtSemiEvtJetPartonMatch.cfi"

  include "TopQuarkAnalysis/TopJetCombination/data/TtSemiJetCombMVATrainer_Muons.cff"

# file service
  service = TFileService {
    string fileName = "trainSemiLepJetCombMVA_muons.root"
  }

  path p0 = {
    makeAllCuts,
    makeGenEvt
  }

  path p1 = {
     makeAllCuts,
     ttSemiLeptonicFilter,
     ttSemiJetPartonMatch
  }

  path p2 = {
    makeAllCuts,
    makeMVATraining
  }
}
