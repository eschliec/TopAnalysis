process Test = {
# output level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.FwkReport.reportEvery = 100

# input file(s)
  include "TopAnalysis/Configuration/data/SourceInput.cff"
  include "TopAnalysis/Configuration/test/csa07AllEventsSkim_ttbar.cff"
  untracked PSet maxEvents = {untracked int32 input = 100}

# TQAF Layer 1 TopObject production
#  include "TopQuarkAnalysis/TopObjectProducers/data/TQAFLayer1.cff"
#  sequence tqaf = {tqafLayer1}

# TQAF Layer 2 TtSemi muon decay chain filtering
  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtProducer.cff"
  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiLeptonicFilter.cfi"
  replace ttSemiLeptonicFilter.channel_1 = {0,1,0}
  sequence ttSemiLeptonicMuonFilter = {makeGenEvt, ttSemiLeptonicFilter}

# add event weight
  include "TopAnalysis/TopUtils/data/EventWeight.cfi"
  sequence wght = {makeWeights} 

# analyze semileptonic ttbar events with muons
# include "TopAnalysis/TopFilter/data/filterSequences/semiLepMuSelection_pre.cff"  
  include "TopAnalysis/TopFilter/data/filterSequences/semiLepMuSelection_fin.cff"  
  sequence cutflow = {muonSelection, jetsSelection}

# file service
  service = TFileService {
    string fileName = "analyzeSemiLeptonicEvents.root"
  }
  endpath p = {wght, cutflow}
}
